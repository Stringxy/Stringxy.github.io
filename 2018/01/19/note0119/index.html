<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="XY"><meta name="description" content="不会跳hiphop的全站攻城狮不是一个好的个人游戏开发程序媛"><link rel="alternative" href="/atom.xml" title="StringXy" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>《大型网站系统与java中间件实践》笔记一 - StringXy</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">StringXy</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-01-18T16:00:00.000Z">January 19, 2018</time><h1 class="post__title"><a href="/2018/01/19/note0119/">《大型网站系统与java中间件实践》笔记一</a></h1><div class="post__main echo"><h2 id="解决应用服务器变为集群后的session问题"><a href="#解决应用服务器变为集群后的session问题" class="headerlink" title="解决应用服务器变为集群后的session问题"></a>解决应用服务器变为集群后的session问题</h2><h3 id="Session-Sticky-负载均衡器根据每次请求的会话标示进行请求转发"><a href="#Session-Sticky-负载均衡器根据每次请求的会话标示进行请求转发" class="headerlink" title="Session Sticky(负载均衡器根据每次请求的会话标示进行请求转发)"></a>Session Sticky(负载均衡器根据每次请求的会话标示进行请求转发)</h3><ul>
<li>一台web服务器宕机，会造成会话数据丢失</li>
<li>会话标识在应用层（第7层），开销较大</li>
<li>负载均衡器变为一个由状态的节点，内存消耗更大，容灾麻烦。</li>
</ul>
<h3 id="Session-Replication-web服务器之间增加会话数据的同步"><a href="#Session-Replication-web服务器之间增加会话数据的同步" class="headerlink" title="Session Replication(web服务器之间增加会话数据的同步)"></a>Session Replication(web服务器之间增加会话数据的同步)</h3><ul>
<li>同步session数据造成了网络带宽开销</li>
<li>集群的session过多会造成内容占用严重</li>
<li>不适合集群机器数多的场景</li>
</ul>
<h3 id="Session数据集中存储（不同web服务器从同样的地方获取session）"><a href="#Session数据集中存储（不同web服务器从同样的地方获取session）" class="headerlink" title="Session数据集中存储（不同web服务器从同样的地方获取session）"></a>Session数据集中存储（不同web服务器从同样的地方获取session）</h3><ul>
<li>适用于web服务器数量大，session数多的场景</li>
<li>读写session数据引入网络操作，存在时延和不稳定性</li>
<li>存储session的机器或集群有问题会影响应用</li>
</ul>
<h3 id="Cookie-Based"><a href="#Cookie-Based" class="headerlink" title="Cookie Based"></a>Cookie Based</h3><ul>
<li>cookie长度限制会先限制session数据的长度</li>
<li>安全性不高</li>
<li>外部带宽消耗</li>
<li>性能影响</li>
</ul>
<h2 id="数据库读写分离"><a href="#数据库读写分离" class="headerlink" title="数据库读写分离"></a>数据库读写分离</h2><h3 id="采用数据库作为读库"><a href="#采用数据库作为读库" class="headerlink" title="采用数据库作为读库"></a>采用数据库作为读库</h3><h3 id="搜索引擎其实是一个读库"><a href="#搜索引擎其实是一个读库" class="headerlink" title="搜索引擎其实是一个读库"></a>搜索引擎其实是一个读库</h3><h2 id="动态缓存技术"><a href="#动态缓存技术" class="headerlink" title="动态缓存技术"></a>动态缓存技术</h2><h3 id="CSI（client-side-includes）"><a href="#CSI（client-side-includes）" class="headerlink" title="CSI（client side includes）"></a>CSI（client side includes）</h3><ul>
<li>含义：通过iframe，JavaScript，ajax等方式将另外一个页面的内容动态包含。</li>
<li>优点：相对比较简单，不需要服务器端做改变/配置</li>
<li>缺点：不利于搜索引擎优化（iframe），存在JavaScript兼容问题，存在缓存问题不能及时生效。</li>
</ul>
<h3 id="SSI（server-side-includes）"><a href="#SSI（server-side-includes）" class="headerlink" title="SSI（server side includes）"></a>SSI（server side includes）</h3><ul>
<li>含义：通过注释行SSI命令加载不同模块，需要服务器模块支持（如：apache服务器需要开启mod_include模块）</li>
<li>优点：不受语言限制 </li>
<li>缺点：不能跨域包含</li>
<li>NGINX的SSI用法<br><a href="http://wiki.nginx.org/HttpSsiModuleChs" target="_blank" rel="noopener">http://wiki.nginx.org/HttpSsiModuleChs</a></li>
</ul>
<h3 id="ESI-edge-side-includes"><a href="#ESI-edge-side-includes" class="headerlink" title="ESI(edge side includes)"></a>ESI(edge side includes)</h3><ul>
<li>含义： cache服务器根据不同的缓存控制策略将不同的小部分动态组合成完整的网页。</li>
<li>优点：适用于缓存服务器</li>
<li>缺点：支持较少，使用不广</li>
</ul>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/读书笔记/">读书笔记</a></li></ul></footer></article><div class="comments" id="lv-container" data-id="city" data-uid="your uid"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2016-2018 XY</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>